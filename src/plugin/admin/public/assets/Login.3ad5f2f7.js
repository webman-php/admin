var v=(a,e,i)=>new Promise((f,u)=>{var d=t=>{try{n(i.next(t))}catch(m){u(m)}},c=t=>{try{n(i.throw(t))}catch(m){u(m)}},n=t=>t.done?f(t.value):Promise.resolve(t.value).then(d,c);n((i=i.apply(a,e)).next())});import{aJ as R,I as y,c as M,m as L,r as h,a as P,B as N,aL as l,o as T,aM as U,p as s,i as r,j as o,s as $,q as w,t as z,b8 as V,x as K}from"./index.f8bcf808.js";import{B as O,a as j}from"./index.a4e346ff.js";import{b as A}from"./common.4f9a0f43.js";import{a as q,b as J}from"./useLogin.7cc7f83b.js";import"./index.0e7d1863.js";import{F as _}from"./index.14ba2351.js";import{C as S,R as E}from"./index.f2e779e6.js";import"./useWindowSizeFn.d2a0a89b.js";import"./FullscreenOutlined.f88b6f65.js";import"./_baseIteratee.f49fbaac.js";const G=S,H=E,Q=_.Item,W=y.Password,{t:X}=M(),Y=L({username:"",password:"",captcha:""}),B=h(),C=h(""),g=h(!1),{validForm:Z}=J(B),{getFormRules:x}=q();function I(){C.value="/app/admin/plugin/app/captcha?r="+new Date().getTime()}I();const aa=P({components:{BasicModal:O,FormItem:Q,ACol:G,ARow:H,Input:y,Form:_,Button:N,InputPassword:W},emits:["reload","register"],setup(){const[a,{closeModal:e}]=j(),{createMessage:i}=K(),{success:f}=i;function u(){return v(this,null,function*(){const d=yield Z();if(!d)return;const c=setTimeout(()=>{I(),g.value=!1},2e3);g.value=!0,yield A("/app/admin/plugin/app/login",d),g.value=!1,clearTimeout(c),e(),f("login successful")})}return{formRef:B,formData:Y,loading:g,handleLogin:u,register:a,getFormRules:x,captchaUrl:C,t:X}}}),ea=r("div",{class:"px-4 py-2"},[r("div",{role:"alert",class:"mb-4 ant-alert ant-alert-info ant-alert-no-icon","data-show":"true"},[r("div",{class:"ant-alert-content"},[r("div",{class:"ant-alert-message"},[r("b",null,[w("Note: Login here "),r("a",{href:"https://www.workerman.net",target:"_blank"},"workerman.netOfficial website"),w(" account")])])])])],-1),oa={class:"p-4"},sa=["src"];function ta(a,e,i,f,u,d){const c=l("Input"),n=l("FormItem"),t=l("InputPassword"),m=l("a-col"),F=l("a-row"),k=l("Button"),b=l("Form"),D=l("BasicModal");return T(),U(D,V(a.$attrs,{destroyOnClose:"",onRegister:a.register,title:"Log inworkerman",showCancelBtn:!1,showOkBtn:!1}),{default:s(()=>[ea,r("div",oa,[o(b,{class:"p-4 enter-x",model:a.formData,rules:a.getFormRules,ref:"formRef",onKeypress:$(a.handleLogin,["enter"])},{default:s(()=>[o(n,{name:"username",class:"enter-x"},{default:s(()=>[o(c,{size:"large",value:a.formData.username,"onUpdate:value":e[0]||(e[0]=p=>a.formData.username=p),placeholder:a.t("sys.login.userName"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),o(n,{name:"password",class:"enter-x"},{default:s(()=>[o(t,{size:"large",visibilityToggle:"",value:a.formData.password,"onUpdate:value":e[1]||(e[1]=p=>a.formData.password=p),placeholder:a.t("sys.login.password")},null,8,["value","placeholder"])]),_:1}),o(n,{name:"captcha",class:"enter-x"},{default:s(()=>[o(F,{type:"flex",justify:"space-between",align:"middle"},{default:s(()=>[o(m,null,{default:s(()=>[o(c,{size:"large",value:a.formData.captcha,"onUpdate:value":e[2]||(e[2]=p=>a.formData.captcha=p),placeholder:a.t("sys.login.captcha"),class:"fix-auto-fill captcha-input",maxlength:5},null,8,["value","placeholder"])]),_:1}),o(m,null,{default:s(()=>[r("img",{src:a.captchaUrl,onClick:e[3]||(e[3]=(...p)=>a.switchCatpcha&&a.switchCatpcha(...p))},null,8,sa)]),_:1})]),_:1})]),_:1}),o(n,{class:"enter-x"},{default:s(()=>[o(k,{type:"primary",size:"large",block:"",onClick:a.handleLogin,loading:a.loading},{default:s(()=>[w(z(a.t("sys.login.loginButton")),1)]),_:1},8,["onClick","loading"])]),_:1})]),_:1},8,["model","rules","onKeypress"])])]),_:1},16,["onRegister"])}var wa=R(aa,[["render",ta]]);export{wa as default};
