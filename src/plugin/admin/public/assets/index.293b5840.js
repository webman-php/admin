var m=(t,e,n)=>new Promise((s,u)=>{var c=a=>{try{r(n.next(a))}catch(l){u(l)}},o=a=>{try{r(n.throw(a))}catch(l){u(l)}},r=a=>a.done?s(a.value):Promise.resolve(a.value).then(c,o);r((n=n.apply(t,e)).next())});import{m as I,cV as h,a3 as C,f as b,ag as z,ac as F,ab as k,k as d,bB as A,r as f,cN as N,a as S,B as T,c as j,aJ as g,c9 as D,aL as p,o as y,aM as w,p as v,q as O,t as P,b8 as _,b as R,b4 as V,b5 as q,aY as E,b6 as L,b7 as J,j as M,b9 as $}from"./index.f8bcf808.js";function U(t,e="value",n="change",s){const u=A(),c=u==null?void 0:u.emit,o=I({value:t[e]}),r=h(o),a=i=>{o.value=i};return C(()=>{o.value=t[e]}),[b({get(){return o.value},set(i){z(i,r.value)||(o.value=i,F(()=>{c==null||c(n,i,...k(d(s))||[])}))}}),a,r]}function Y(t){const e=f(t),n=f(!1);let s;function u(){s&&window.clearInterval(s)}function c(){n.value=!1,u(),s=null}function o(){d(n)||!!s||(n.value=!0,s=setInterval(()=>{d(e)===1?(c(),e.value=t):e.value-=1},1e3))}function r(){e.value=t,c()}function a(){r(),o()}return N(()=>{r()}),{start:o,reset:r,restart:a,clear:u,stop:c,currentCount:e,isStart:n}}const G={value:{type:[Object,Number,String,Array]},count:{type:Number,default:60},beforeStartFunc:{type:Function,default:null}},H=S({name:"CountButton",components:{Button:T},props:G,setup(t){const e=f(!1),{currentCount:n,isStart:s,start:u,reset:c}=Y(t.count),{t:o}=j(),r=b(()=>d(s)?o("component.countdown.sendText",[d(n)]):o("component.countdown.normalText"));C(()=>{t.value===void 0&&c()});function a(){return m(this,null,function*(){const{beforeStartFunc:l}=t;if(l&&D(l)){e.value=!0;try{(yield l())&&u()}finally{e.value=!1}}else u()})}return{handleStart:a,currentCount:n,loading:e,getButtonText:r,isStart:s}}});function K(t,e,n,s,u,c){const o=p("Button");return y(),w(o,_(t.$attrs,{disabled:t.isStart,onClick:t.handleStart,loading:t.loading}),{default:v(()=>[O(P(t.getButtonText),1)]),_:1},16,["disabled","onClick","loading"])}var B=g(H,[["render",K]]);const Q={value:{type:String},size:{type:String,validator:t=>["default","large","small"].includes(t)},count:{type:Number,default:60},sendCodeApi:{type:Function,default:null}},W=S({name:"CountDownInput",components:{CountButton:B},inheritAttrs:!1,props:Q,setup(t){const{prefixCls:e}=R("countdown-input"),[n]=U(t);return{prefixCls:e,state:n}}});function X(t,e,n,s,u,c){const o=p("CountButton"),r=p("a-input");return y(),w(r,_(t.$attrs,{class:t.prefixCls,size:t.size,value:t.state}),V({addonAfter:v(()=>[M(o,{size:t.size,count:t.count,value:t.state,beforeStartFunc:t.sendCodeApi},null,8,["size","count","value","beforeStartFunc"])]),_:2},[q(Object.keys(t.$slots).filter(a=>a!=="addonAfter"),a=>({name:a,fn:v(l=>[E(t.$slots,a,L(J(l||{})))])}))]),1040,["class","size","value"])}var Z=g(W,[["render",X]]);const et=$(Z);$(B);export{et as C,U as u};
