var _=(e,l,n)=>new Promise((m,s)=>{var u=t=>{try{a(n.next(t))}catch(i){s(i)}},c=t=>{try{a(n.throw(t))}catch(i){s(i)}},a=t=>t.done?m(t.value):Promise.resolve(t.value).then(u,c);a((n=n.apply(e,l)).next())});import{B as N,u as k}from"./useTable.1f9e9a8e.js";import{x as L}from"./BasicForm.82e222ab.js";import{aJ as I,a as O,d2 as w,aL as p,o as A,h as C,j as d,p as T,q as y,t as v,aN as x,x as D}from"./index.f8bcf808.js";import{T as E}from"./table.0ba2e59f.js";import{b as g}from"./index.a4e346ff.js";import S from"./Modify.5672e800.js";import R from"./CreateMenu.da41510c.js";import{g as $,b as F}from"./common.4f9a0f43.js";import"./index.d82b2be8.js";import"./useForm.15b4451f.js";import"./index.d4c4849e.js";import"./index.40c44490.js";import"./index.060f9061.js";import"./index.0e7d1863.js";import"./index.8cf0b441.js";import"./useWindowSizeFn.d2a0a89b.js";import"./useContentViewHeight.0d100a60.js";import"./ArrowLeftOutlined.73a6b26e.js";import"./transButton.ce0379fb.js";import"./index.05080ca7.js";import"./index.b5bef3a7.js";import"./_baseIteratee.f49fbaac.js";import"./index.91cad2d2.js";import"./sortable.esm.c20789c1.js";import"./RedoOutlined.ed3d1686.js";import"./FullscreenOutlined.f88b6f65.js";import"./fromPairs.2341303e.js";import"./scrollTo.d51d60f9.js";import"./index.fe83b607.js";import"./index.bf9f5082.js";import"./index.14ba2351.js";import"./index.293b5840.js";import"./index.26a767f7.js";import"./uniqBy.0ae55b98.js";import"./download.b66616ed.js";import"./index.f2e779e6.js";import"./index.4119ca00.js";import"./index.e344e4ac.js";import"./tableData.4d15a5f8.js";const W=[{title:"Table Name",dataIndex:"TABLE_NAME",sorter:!0},{title:"Records",dataIndex:"TABLE_ROWS",sorter:!0},{title:"Remark",dataIndex:"TABLE_COMMENT",sorter:!0},{title:"engine",dataIndex:"ENGINE",sorter:!0},{title:"character set",sorter:!0,dataIndex:"TABLE_COLLATION"},{title:"creation time",sorter:!0,dataIndex:"CREATE_TIME"}],H=O({components:{Modal:S,BasicTable:N,TableAction:L,ModalCreateMenu:R},setup(){const[e,{openModal:l}]=g(),[n,{openModal:m}]=g(),{createMessage:s}=D(),{success:u}=s,c=w(),[a,{reload:t}]=k({title:"all tables",api:$(E.SHOW),columns:W,bordered:!0,actionColumn:{width:250,title:"Action",dataIndex:"action",slots:{customRender:"action"}}});function i(){l(!0,{table:""})}function M(){t()}function r(o){l(!0,{table:o.TABLE_NAME})}function b(o){return _(this,null,function*(){yield F(E.DROP,{table:o.TABLE_NAME}),u("successfully deleted"),t()})}function f(o){return _(this,null,function*(){m(!0,{table:o.TABLE_NAME})})}function h(o){console.log("Clicked to enable",o)}function B(o){c(`/database/table/view/${o}`)}return{registerTable:a,handleEdit:r,handleDelete:b,handleOpen:h,view:B,openTableModal:i,register:e,createMenuRegister:n,reloadTables:M,handleCreateMenu:f,ModalCreateMenu:R}}}),V={class:"p-4"},G=["onClick"];function P(e,l,n,m,s,u){const c=p("a-button"),a=p("TableAction"),t=p("BasicTable"),i=p("Modal"),M=p("ModalCreateMenu");return A(),C("div",V,[d(t,{onRegister:e.registerTable,showTableSetting:""},{toolbar:T(()=>[d(c,{type:"primary",onClick:e.openTableModal},{default:T(()=>[y(" Create table ")]),_:1},8,["onClick"])]),bodyCell:T(({column:r,record:b})=>[r.key==="TABLE_ROWS"?(A(),C("a",{key:0,onClick:f=>e.view(b.TABLE_NAME)},v(b.TABLE_ROWS),9,G)):x("",!0)]),action:T(({record:r})=>[d(a,{actions:[{label:"edit",onClick:e.handleEdit.bind(null,r)},{label:"delete",icon:"ic:outline-delete-outline",popConfirm:{title:"delete or not\uFF1F",confirm:e.handleDelete.bind(null,r)}}],dropDownActions:[{label:"One-click menu",onClick:e.handleCreateMenu.bind(null,r)}]},null,8,["actions","dropDownActions"])]),_:1},8,["onRegister"]),d(i,{onRegister:e.register,defaultFullscreen:!0,minHeight:100,onReload:e.reloadTables},null,8,["onRegister","onReload"]),d(M,{onRegister:e.createMenuRegister,minHeight:300},null,8,["onRegister"])])}var Oe=I(H,[["render",P]]);export{Oe as default};
